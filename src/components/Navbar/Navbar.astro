---
import NavLinks from "./NavLinks.astro";

// Importamos los componentes optimizados
import NavbarContainer from "./NavbarContainer.astro";
import NavbarLogo from "./NavbarLogo.astro";
import NavbarMobileButton from "./NavbarMobileButton.astro";
import NavbarDesktopLinks from "./NavbarDesktopLinks.astro";
import NavbarCTA from "./NavbarCTA.astro";

// Importamos componentes del menú móvil
import MobileMenuContainer from "./NavbarMobileMenu/MobileMenuContainer.astro";
import MobileMenuHeader from "./NavbarMobileMenu/MobileMenuHeader.astro";
import MobileMenuCTA from "./NavbarMobileMenu/MobileMenuCTA.astro";
import MobileMenuScript from "./NavbarMobileMenu/MobileMenuScript.astro";

/*
 * NOTA: El script para el menú móvil se encuentra en el componente MobileMenuScript.
 * Este utiliza el evento 'astro:page-load' para asegurar que el menú funcione correctamente
 * después de las transiciones de página de Astro.
 */
---

<NavbarContainer>
  <nav class="container mx-auto px-4 py-2 relative">
    <div class="flex items-center justify-between">
      <!-- Logo with shine effect -->
      <div class="relative">
        <div class="absolute -inset-1 bg-gradient-to-r from-blue-600/20 to-blue-600/20 rounded-full blur-lg opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
        <NavbarLogo />
      </div>

      <!-- Desktop Navigation with enhanced visual elements -->
      <div class="hidden lg:flex items-center bg-white/30 backdrop-filter backdrop-blur-lg px-3 py-1.5 rounded-full border border-blue-100/40 shadow-sm">
        <NavbarDesktopLinks />
      </div>

      <!-- Mobile Menu Button with improved visual -->
      <div class="lg:hidden">
        <NavbarMobileButton />
      </div>

      <!-- Call to action button with enhanced styling -->
      <NavbarCTA />
    </div>
  </nav>

  <!-- Mobile menu con subcomponentes -->
  <MobileMenuContainer>
    <MobileMenuHeader title="Menú" />
    <NavLinks isMobile={true} />
    <MobileMenuCTA 
      text="¡Regístrate Ahora!" 
      href="/registro" 
      ctaText="No te pierdas esta oportunidad única" 
    />
  </MobileMenuContainer>
</NavbarContainer>

<!-- Scripts para el menú móvil -->
<MobileMenuScript />
