---
interface Props {
  eventDate: string;
}

const { eventDate } = Astro.props;

// Definir las unidades del contador
const units = [
  { id: "days", label: "Días" },
  { id: "hours", label: "Horas" },
  { id: "minutes", label: "Minutos" },
  { id: "seconds", label: "Segundos" }
];
---

<div class="countdown-container">
  <h3 class="text-2xl font-bold text-blue-600 mb-6">Faltan:</h3>
  <div class="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-2xl mx-auto">
    {units.map(unit => (
      <div class="bg-blue-600 text-white rounded-lg p-4 shadow-md">
        <span id={unit.id} class="text-3xl md:text-4xl font-bold block">--</span>
        <span class="text-sm">{unit.label}</span>
      </div>
    ))}
  </div>
</div>

<script define:vars={{eventDate}}>
  // Función para actualizar el contador regresivo
  function updateCountdown() {
    const eventTime = new Date(eventDate).getTime();
    const currentTime = new Date().getTime();
    const timeRemaining = eventTime - currentTime;
    
    if (timeRemaining > 0) {
      const days = Math.floor(timeRemaining / (1000 * 60 * 60 * 24));
      const hours = Math.floor((timeRemaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000);
      
      document.getElementById('days').textContent = days;
      document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
      document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
      document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
    } else {
      document.getElementById('days').textContent = '0';
      document.getElementById('hours').textContent = '00';
      document.getElementById('minutes').textContent = '00';
      document.getElementById('seconds').textContent = '00';
    }
  }
  
  // Actualizar el contador cada segundo
  updateCountdown();
  setInterval(updateCountdown, 1000);
</script>

<style>
  .countdown-container {
    animation: pulse 2s infinite alternate;
  }
  
  @keyframes pulse {
    0% { transform: scale(1); }
    100% { transform: scale(1.02); }
  }
</style>
